<div class="badge-display" 
     *ngIf="badge"
     [class.clickable]="clickable"
     [class]="size + ' ' + getRarityClass()"
     [title]="badge.description"
     (click)="onBadgeClick()">
  
  <div class="badge-icon" [style.background]="badge.color">
    {{ badge.icon }}
  </div>
  
  <div class="badge-content" *ngIf="showDetails">
    <h4 class="badge-name">{{ badge.name }}</h4>
    <p class="badge-description" *ngIf="size !== 'small'">{{ badge.description }}</p>
    
    <div class="badge-meta" *ngIf="size === 'large'">
      <div class="badge-points">
        <span class="points-icon">💎</span>
        <span class="points-value">{{ badge.points }} puntos</span>
      </div>
      <div class="badge-rarity">
        <span class="rarity-label">{{ getRarityLabel(badge.rarity) }}</span>
      </div>
      <div class="badge-date" *ngIf="badge.earnedDate">
        <span class="date-icon">📅</span>
        <span class="date-value">{{ badge.earnedDate | date:'mediumDate' }}</span>
      </div>
    </div>
  </div>
  
  <!-- Efecto de brillo para badges épicos y legendarios -->
  <div class="badge-glow" *ngIf="badge.rarity === 'epic' || badge.rarity === 'legendary'"></div>
  
  <!-- Indicador de nuevo si se acaba de ganar -->
  <div class="new-badge-indicator" *ngIf="badge.earnedDate && isRecentlyEarned()">
    <span>¡NUEVO!</span>
  </div>
</div>